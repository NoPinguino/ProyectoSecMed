@startuml SecMec

skinparam classAttributeIconSize 0
skinparam backgroundColor white
skinparam class {
    BackgroundColor<<abstract>> #F0F0F0
    BorderColor #000000
    ArrowColor #000000
}

' ===== CLASES ABSTRACTAS =====
abstract class Persona <<abstract>> {
  # nombre: String
  # dni: String
  # email: String
  # direccion: String
  __
  + Persona(String,String,String,String)
  + getNombre(): String
  + getDni(): String
  + getEmail(): String
  + getDireccion(): String
  + setNombre(String): void
  + setDni(String): void
  + setEmail(String): void
  + setDireccion(String): void
  + toString(): String
}

abstract class EntradaHistorial <<abstract>> {
  # fecha: LocalDate
  # idMedico: String
  # causa: String
  __
  + EntradaHistorial(LocalDate,String,String)
  + getFecha(): LocalDate
  + getIdMedico(): String
  + getCausa(): String
  + {abstract} getTipo(): String
}

abstract class PersonalSanitario <<abstract>> {
  # numeroColegiado: String
  __
  + PersonalSanitario(String,String,String,String,String,String,String,String)
  + getNumeroColegiado(): String
  + setNumeroColegiado(String): void
}

' ===== CLASES CONCRETAS - Usuarios =====
class Usuario {
  # username: String
  # passwordHash: String
  # salt: String
  __
  + Usuario(String,String,String,String,String,String,String)
  + getUsername(): String
  + setUsername(String): void
  + getPasswordHash(): String
  + setPasswordHash(String): void
  + getSalt(): String
  + setSalt(String): void
  + toString(): String
}

class Administrativo {
  - idAdministrativo: String
  __
  + Administrativo(String,String,String,String,String,String,String,String)
  + getIdAdministrativo(): String
  + setIdAdministrativo(String): void
  + asignarMedico(Paciente, Medico): String
  + asignarPrueba(Paciente, PruebaMedica): String
  + toString(): String
}

class Medico {
  - especialidad: Especialidad
  __
  + Medico(String,String,String,String,String,String,String,String,Especialidad)
  + getEspecialidad(): Especialidad
  + setEspecialidad(Especialidad): void
  + toString(): String
}

class Paciente {
  - historial: HistorialMedico
  - medicoAsignado: Medico
  __
  + Paciente(HistorialMedico, Medico, String,String,String,String)
  + Paciente(HistorialMedico, String,String,String,String)
  + getHistorial(): HistorialMedico
  + setHistorial(HistorialMedico): void
  + getMedicoAsignado(): Medico
  + setMedicoAsignado(Medico): void
  + toString(): String
}

' ===== HISTORIAL =====
class HistorialMedico {
  - {final} entradas: ArrayList<EntradaHistorial>
  __
  + HistorialMedico()
  + getEntradas(): String
  + agregarEntrada(EntradaHistorial): String
  + toString(): String
}

class PruebaMedica {
  - {final} tipoPrueba: TipoPrueba
  - {final} resultado: String
  __
  + PruebaMedica(LocalDate,String,String,TipoPrueba,String)
  + getTipoPrueba(): TipoPrueba
  + getResultado(): String
  + getTipo(): String
  + toString(): String
}

class Receta {
  - {final} medicamentos: ArrayList<String>
  __
  + Receta(LocalDate,String,String,ArrayList<String>)
  + getMedicamentos(): ArrayList<String>
  + getTipo(): String
  + toString(): String
}

' ===== ENUMERACIONES =====
enum TipoPrueba {
  LASER
  ECO
  ANALISIS_SANGRE
  RAYOS_X
  TAC
  RESONANCIA
  BIOPSIA
  ECG
  ORINA
  GLUCOSA
  __
  - nombrePrueba: String
  __
  TipoPrueba(String)
  + getNombrePrueba(): String
}

enum Especialidad {
  CARDIOLOGIA
  DERMATOLOGIA
  NEUROLOGIA
  PEDIATRIA
  GINECOLOGIA
  ONCOLOGIA
  ORTOPEDIA
  PSIQUIATRIA
  ANESTESIOLOGIA
  UROLOGIA
  ENDOCRINOLOGIA
  GASTROENTEROLOGIA
  HEMATOLOGIA
  NEONATOLOGIA
  OTORRINOLARINGOLOGIA
  __
  - nombre: String
  __
  Especialidad(String)
  + toString(): String
}


' ===== CLASES MVC =====
class Main {
  + {static} main(String[]): void
}

class ControladorPrincipal {
  - {static final} vista: VistaConsola
  __
  + ControladorPrincipal()
  + ejecutarPruebas(): void
}

class VistaConsola {
  + VistaConsola()
  + mostrarEnConsola(String): void
}

' ===== HERENCIAS =====
Persona <|-- Usuario
Persona <|-- Paciente
Usuario <|-- Administrativo
Usuario <|-- PersonalSanitario
PersonalSanitario <|-- Medico
EntradaHistorial <|-- PruebaMedica
EntradaHistorial <|-- Receta

' ===== RELACIONES =====
Paciente *-- "1" HistorialMedico : tiene
Paciente --> "0..1" Medico : medicoAsignado
HistorialMedico o-- "*" EntradaHistorial : contiene
Medico --> "1" Especialidad : tiene
PruebaMedica --> "1" TipoPrueba : tiene

' Dependencias
Administrativo ..> Paciente : gestiona
Administrativo ..> Medico : asigna
Administrativo ..> PruebaMedica : asigna

ControladorPrincipal *-- "1" VistaConsola : vista
ControladorPrincipal ..> Medico : crea/usa
ControladorPrincipal ..> Administrativo : crea/usa
ControladorPrincipal ..> Paciente : crea/usa
ControladorPrincipal ..> PruebaMedica : crea/usa
ControladorPrincipal ..> Receta : crea/usa
ControladorPrincipal ..> HistorialMedico : crea/usa
ControladorPrincipal ..> Especialidad : usa

Main ..> ControladorPrincipal : crea/usa

@enduml